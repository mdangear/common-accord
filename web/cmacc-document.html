<!-- Imports polymer -->
<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="./cmacc-ast.html">

<dom-module id="cmacc-document">
    <template>
        <cmacc-ast file="{{file}}" on-refresh="refresh"></cmacc-ast>
        <div id="content"></div>
    </template>
</dom-module>


<script>
    Polymer({
        is: 'cmacc-document',

        properties: {
            file: String
        },

        refresh: function(){
            var ast = this.querySelector('cmacc-ast').ast;

            window.cmacc.render(ast, function(err, markdown){
                this.$.content.innerHTML = window.cmacc.marked(markdown);
            }.bind(this))

        }

    });
</script>