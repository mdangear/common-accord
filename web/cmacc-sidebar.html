<!-- Imports polymer -->
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-signals/iron-signals.html">

<link rel="import" href="../bower_components/paper-tooltip/paper-tooltip.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">

<dom-module id="cmacc-sidebar">
    <template>
        <div>
            <template is="dom-repeat" items="{{list(ast)}}">
                <paper-item><strong>$ {{item.key}} </strong> - [{{item.ref}}]</paper-item>
                <template is="dom-repeat" items="{{list(item)}}">
                    <paper-item on-mouseover='over' on-mouseout='out' on-tap="click">{{item.key}} : {{item.val}}</paper-item>
                </template>
            </template>
        </div>
    </template>
</dom-module>


<script>
    Polymer({
        is: 'cmacc-sidebar',

        properties: {
            ast: Object
        },
        attached: function () {

        },

        list: function (ast) {
            return ast.variables
        },

        over: function (e) {
            var item = e.model.item;
            this.fire('iron-signal', {name: 'cmacc-variable', data: item.loc})
        },

        out: function () {
            this.fire('iron-signal', {name: 'cmacc-variable', data: null})
        },

        click: function (e) {
            var item = e.model.item;
            this.fire('cmacc-variable', {name: 'ref', data: item.loc})
        }

    });
</script>